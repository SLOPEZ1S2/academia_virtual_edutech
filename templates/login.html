{% extends "_layout.html" %}
{% block title %}Iniciar sesión{% endblock %}

{% block content %}
<div class="container small">
  <div class="card" style="max-width:420px;margin:0 auto;">
    <h2 style="margin-bottom:6px;">Iniciar sesión</h2>
    <p class="hint" style="margin-top:0;">Accede para completar tu compra.</p>

    {% if error %}
      <div class="alert error" role="alert">{{ error }}</div>
    {% endif %}

    <form method="post" novalidate>
      <label for="username">Usuario</label>
      <input id="username" name="username" placeholder="Ingresa tu usuario" required autofocus>

      <label for="password">Contraseña</label>
      <div style="position:relative">
        <input id="password" type="password" name="password" placeholder="Ingresa tu contraseña" required>
        <button type="button" id="toggle-pass"
                class="btn"
                style="position:absolute;right:6px;top:50%;transform:translateY(-50%);padding:6px 10px;">
          Mostrar
        </button>
      </div>

      <div style="display:flex;justify-content:space-between;align-items:center;margin-top:10px;">
        <span class="hint">Demo: <b>admin</b> / <b>1234</b></span>
        <a href="{{ url_for('shop') }}" class="hint">Ver tienda</a>
      </div>

      <button class="btn primary" type="submit" style="margin-top:12px;width:100%;">
        Entrar
      </button>
    </form>

    <div class="hint" style="margin-top:10px;">
      ¿Olvidaste tus datos? En esta demo no hay registro. Escríbeme y lo habilitamos con base de datos.
    </div>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script>
  // Mostrar / ocultar contraseña (sin tocar el servidor)
  (function () {
    const btn = document.getElementById('toggle-pass');
    const input = document.getElementById('password');
    if (btn && input) {
      btn.addEventListener('click', function () {
        const isPwd = input.getAttribute('type') === 'password';
        input.setAttribute('type', isPwd ? 'text' : 'password');
        btn.textContent = isPwd ? 'Ocultar' : 'Mostrar';
      });
    }
  })();
</script>
{% endblock %}
